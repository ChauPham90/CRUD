{"ast":null,"code":"import _toConsumableArray from \"/home/minhchaupham90/projects/crud/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/minhchaupham90/projects/crud/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/minhchaupham90/projects/crud/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./styles.css\";\nimport UserTable from \"./UserTable\";\nimport AddUserForm from \"./AddUserForm\";\nimport EditUserForm from \"./EditUserForm\";\nimport { createSemicolonClassElement } from \"typescript\";\nvar BACKEND_ROOT = \"https://full-stack-todolist-m6.herokuapp.com/\";\n\nvar App = function App() {\n  var _useState = useState([{}]),\n      _useState2 = _slicedToArray(_useState, 2),\n      users = _useState2[0],\n      setUsers = _useState2[1];\n\n  useEffect(function () {\n    fetch(BACKEND_ROOT).then(function (response) {\n      return response.json();\n    }).then(function (response) {\n      return console.log(response);\n    }).then(function (users) {\n      return setUsers(users);\n    }).catch(function (err) {\n      return console.error(err);\n    });\n  }, []);\n\n  var addUser = function addUser(user) {\n    console.log(user);\n    fetch(BACKEND_ROOT, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      mode: \"cors\",\n      body: JSON.stringify(user)\n    }).then(function (response) {\n      return response.json();\n    }).then(function () {\n      setUsers([].concat(_toConsumableArray(users), [user]));\n    }).catch(function (err) {\n      console.log(err.message);\n    });\n  };\n\n  console.log(users);\n\n  var deleteUser = function deleteUser(id) {\n    fetch(\"\".concat(BACKEND_ROOT).concat(id), {\n      method: \"DELETE\",\n      mode: \"cors\"\n    }).then(function () {\n      setUsers(users.filter(function (user) {\n        return user.id !== id;\n      }));\n      setEditing(false);\n    }).catch(function (err) {\n      console.log(err.message);\n      console.log(err);\n    }); // setUsers(users.filter(user => user.id !== id));\n    //\n  };\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      editing = _useState4[0],\n      setEditing = _useState4[1];\n\n  var initialFormState = {\n    id: null,\n    name: \"\",\n    username: \"\"\n  };\n\n  var _useState5 = useState(initialFormState),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentUser = _useState6[0],\n      setCurrentUser = _useState6[1];\n\n  var editRow = function editRow(user) {\n    setEditing(true);\n    setCurrentUser({\n      id: user.id,\n      name: user.name,\n      username: user.username\n    });\n  };\n\n  var updateUser = function updateUser(id, updatedUser) {\n    console.log(updatedUser);\n    fetch(\"\".concat(BACKEND_ROOT).concat(id), {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      mode: \"cors\",\n      // body: JSON.stringify(updatedUser)\n      body: JSON.stringify(updatedUser)\n    }).then(function (response) {\n      return response.json();\n    }).then(function () {\n      setEditing(false);\n      setUsers(users.map(function (user) {\n        return user.id === id ? updatedUser : user;\n      }));\n    }).catch(function (err) {\n      console.log(err.message);\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"flex-row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"flex-large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, editing ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Edit user\"), React.createElement(EditUserForm, {\n    editing: editing,\n    setEditing: setEditing,\n    currentUser: currentUser,\n    updateUser: updateUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"Add todos\"), React.createElement(AddUserForm, {\n    addUser: addUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"flex-large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"View todos\"), React.createElement(UserTable, {\n    users: users,\n    editRow: editRow,\n    deleteUser: deleteUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }))));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/minhchaupham90/projects/crud/src/App.js"],"names":["React","useState","useEffect","UserTable","AddUserForm","EditUserForm","createSemicolonClassElement","BACKEND_ROOT","App","users","setUsers","fetch","then","response","json","console","log","catch","err","error","addUser","user","method","headers","mode","body","JSON","stringify","message","deleteUser","id","filter","setEditing","editing","initialFormState","name","username","currentUser","setCurrentUser","editRow","updateUser","updatedUser","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./styles.css\";\nimport UserTable from \"./UserTable\";\nimport AddUserForm from \"./AddUserForm\";\nimport EditUserForm from \"./EditUserForm\";\nimport { createSemicolonClassElement } from \"typescript\";\n\nconst BACKEND_ROOT = \"https://full-stack-todolist-m6.herokuapp.com/\";\n\nconst App = () => {\n  const [users, setUsers] = useState([{}]);\n\n  useEffect(() => {\n    fetch(BACKEND_ROOT)\n      .then(response => response.json())\n      .then(response => console.log(response))\n      .then(users => setUsers(users))\n      .catch(err => console.error(err));\n  }, []);\n\n  const addUser = user => {\n    console.log(user);\n    fetch(BACKEND_ROOT, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      mode: \"cors\",\n      body: JSON.stringify(user)\n    })\n      .then(response => response.json())\n      .then(() => {\n        setUsers([...users, user]);\n      })\n      .catch(err => {\n        console.log(err.message);\n      });\n  };\nconsole.log(users)\n  const deleteUser = id => {\n    fetch(`${BACKEND_ROOT}${id}`, { method: \"DELETE\", mode: \"cors\" })\n      .then(() => {\n        setUsers(users.filter(user => user.id !== id));\n        setEditing(false);\n      })\n      .catch(err => {\n        console.log(err.message);\n        console.log(err);\n      });\n\n    // setUsers(users.filter(user => user.id !== id));\n    //\n  };\n\n  const [editing, setEditing] = useState(false);\n  const initialFormState = { id: null, name: \"\", username: \"\" };\n  const [currentUser, setCurrentUser] = useState(initialFormState);\n\n  const editRow = user => {\n    setEditing(true);\n    setCurrentUser({ id: user.id, name: user.name, username: user.username });\n  };\n\n  const updateUser = (id, updatedUser) => {\n    console.log(updatedUser);\n    fetch(`${BACKEND_ROOT}${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      mode: \"cors\",\n      // body: JSON.stringify(updatedUser)\n      body: JSON.stringify(updatedUser)\n    })\n      .then(response => response.json())\n      .then(() => {\n        setEditing(false);\n        setUsers(users.map(user => (user.id === id ? updatedUser : user)));\n      })\n      .catch(err => {\n        console.log(err.message);\n      });\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"flex-row\">\n        <div className=\"flex-large\">\n          {editing ? (\n            <div>\n              <h2>Edit user</h2>\n              <EditUserForm\n                editing={editing}\n                setEditing={setEditing}\n                currentUser={currentUser}\n                updateUser={updateUser}\n              />\n            </div>\n          ) : (\n            <div>\n              <h2>Add todos</h2>\n              <AddUserForm addUser={addUser} />\n            </div>\n          )}\n        </div>\n        <div className=\"flex-large\">\n          <h2>View todos</h2>\n          <UserTable users={users} editRow={editRow} deleteUser={deleteUser} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}